# ============================================================
# Autoriser le CORS pour ton frontend
# ============================================================
<IfModule mod_headers.c>
Header always set Access-Control-Allow-Origin "https://payments.digikuntz.com"
Header always set Access-Control-Allow-Methods "GET, POST, PUT, DELETE, PATCH, OPTIONS"
Header always set Access-Control-Allow-Headers "Authorization,Content-Type,Accept,Origin,X-Requested-With"
Header always set Access-Control-Allow-Credentials "true"
</IfModule>

# ============================================================
# Gestion des requêtes OPTIONS (prévol CORS)
# ============================================================
RewriteEngine On
RewriteCond %{REQUEST_METHOD} OPTIONS
RewriteRule ^(.*)$ $1 [R=204,L]

# ============================================================
# Rediriger toutes les requêtes vers le backend Node.js
# ============================================================
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ http://127.0.0.1:3001/$1 [P,L]

# ============================================================
# Désactiver le listing des fichiers (ce que tu vois maintenant)
# ============================================================
Options -Indexes

# ============================================================
# Proxy configuration
# ============================================================
ProxyPreserveHost On
ProxyRequests Off

# php -- BEGIN cPanel-generated handler, do not edit
# Set the “ea-php81” package as the default “PHP” programming language.
<IfModule mime_module>
  AddHandler application/x-httpd-ea-php81 .php .php8 .phtml
</IfModule>
# php -- END cPanel-generated handler, do not edit